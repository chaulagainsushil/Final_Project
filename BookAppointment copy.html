<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hospital Appointment Booking</title>
        <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f0f2f5;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #34495e;
        }

        select, input[type="date"], input[type="text"], input[type="number"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            margin-bottom: 15px;
        }

        .doctors-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .doctor-card {
            border: 2px solid transparent;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background-color: #f8f9fa;
        }

        .doctor-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .doctor-card.selected {
            border-color: #3498db;
            background-color: #ebf5fb;
        }

        .doctor-card img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .doctor-card h3 {
            margin: 10px 0;
            color: #2c3e50;
        }

        .doctor-card p {
            color: #7f8c8d;
            font-size: 14px;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .time-slot {
            padding: 10px;
            text-align: center;
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-slot:hover {
            background-color: #e9ecef;
        }

        .time-slot.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .time-slot.unavailable {
            background-color: #f1f1f1;
            color: #999;
            cursor: not-allowed;
        }

        .hidden {
            display: none;
        }

        .book-button {
            background-color: #2ecc71;
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }

        .book-button:hover {
            background-color: #27ae60;
        }

        .book-button:disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }

        /* Responsive Styles */
        @media (max-width: 600px) {
            .container {
                padding: 20px;
            }

 h1 {
                font-size: 24px;
            }

            .form-group {
                margin-bottom: 15px;
            }

            select, input[type="date"], input[type="text"], input[type="number"] {
                padding: 10px;
                font-size: 14px;
            }

            .doctor-card {
                padding: 10px;
            }

            .doctor-card img {
                height: 120px;
            }

            .book-button {
                padding: 10px 20px;
                font-size: 14px;
            }
        }

        @media (max-width: 400px) {
            h1 {
                font-size: 20px;
            }

            .book-button {
                padding: 8px 16px;
                font-size: 12px;
            }
        }
    </style>
    </head>
    <body>
        <form action="BookAppointment.php" method="post">
            <div class="container">
                <h1>Book an Appointment</h1>
                <div class="form-group">
                    <label for="patientName">Patient Name</label>
                    <input type="text" id="patientName"
                        placeholder="Enter your name" required>
                </div>

                <div class="form-group">
                    <label for="patientAge">Patient Age</label>
                    <input type="number" id="patientAge"
                        placeholder="Enter your age" required>
                </div>

                <div class="form-group">
                    <label for="contactNumber">Contact Number</label>
                    <input type="text" id="contactNumber"
                        placeholder="Enter your contact number" required>
                </div>

                <div class="form-group">
                    <label for="hospital">Select Hospital</label>
                    <select id="hospital" onchange="loadDepartments()" required>
                        <option value>-- Select Hospital --</option>
                        <option value="patan">Patan Hospital</option>
                        <option value="alka">Alka Hospital</option>
                        <option value="medat">Medat Hospital</option>
                        <option value="bb">B&B Hospital</option>
                        <option value="sumeru">Sumeru Hospital</option>
                        <option value="nepalCancer">Nepal Cancer
                            Hospital</option>
                        <option value="norvic">Norvic Hospital</option>
                        <option value="nepalMediciti">Nepal Mediciti
                            Hospital</option>
                    </select>
                </div>

                <div class="form-group hidden" id="departmentSection">
                    <label for="department">Select Department</label>
                    <select id="department" onchange="loadDoctors()" required>
                        <option value>-- Select Department --</option>
                        <option value="cardiology">Cardiology</option>
                        <option value="neurology">Neurology</option>
                        <option value="gynecology">Gynecology</option>
                        <option value="pediatrics">Pediatrics</option>
                        <option value="orthopedics">Orthopedics</option>
                        <option value="oncology">Oncology</option>
                        <option value="ent">ENT</option>
                        <option value="hematology">Hematology</option>
                        <option value="urology">Urology</option>
                        <option value="ophthalmology">Ophthalmology</option>
                    </select>
                </div>

                <div class="form-group hidden" id="doctorsSection">
                    <label>Select Doctor</label>
                    <div class="doctors-container" id="doctorsContainer">

                    </div>
                </div>

                <div class="form-group hidden" id="dateSection">
                    <label for="appointmentDate">Select Date</label>
                    <input type="date" id="appointmentDate" required
                        onchange="loadTimeSlots()">
                </div>

                <div class="form-group hidden" id="timeSection">
                    <label>Select Time Slot</label>
                    <div class="time-slots" id="timeSlotsContainer">
                    </div>
                </div>

                <button class="book-button hidden" id="bookButton" type="button"
                    onclick="bookAppointment()">Book Appointment</button>
            </div>
        </form>

        <script>
        const doctorsData = {
            patan: {
                cardiology: [
                    { id: 1, name: "Dr. Chandra Mani Adhikari", speciality: "Cardiology", image: "./image/CHANDRA.jpeg" },
                    { id: 2, name: "Dr. Bhagwan Koirala", speciality: "Cardiology", image: "./image/BHAGWAN.jpeg" },
                    { id: 3, name: "Dr. Prakash Raj Regmi", speciality: "Cardiology", image: "./image/prakashrajregmi.jpg" }
                ],
                neurology: [
                    { id: 4, name: "Dr. Nirajan Acharya", speciality: "Neurology", image: "./image/nirajanacharya.jpeg" },
                    { id: 5, name: "Dr. Naresh Kharbuja", speciality: "Neurology", image: "./image/nareshkharbuja.jpeg" }
                ],
                gynecology: [
                    { id: 6, name: "Dr. Reena Shrestha", speciality: "Gynecology", image: "./image/REENA.jpeg" },
                    { id: 7, name: "Dr. Mala Shrestha", speciality: "Gynecology", image: "./image/MALA.jpeg" }
                ],
                pediatrics: [
                    { id: 8, name: "Dr. Yesha Amatya ", speciality: "Pediatrics", image: "./image/YESHA.jpeg" },
                    { id: 9, name: "Dr. Kabita Keyal", speciality: "Pediatrics", image: "./image/KABITA.jpeg" }
                ]
            },
            alka: {
                cardiology: [
                    { id: 10, name: "Dr. Santosh Sharma", speciality: "Cardiology", image: "./image/SANTOSH.jpeg" },
                    { id: 11, name: "Dr. Bijay Timalsina", speciality: "Cardiology", image: "./image/BIJAY.jpeg" }
                ],
                neurology: [
                    { id: 12, name: "Dr. Asim Shrestha", speciality: "Neurology", image: "./image/ASIM.jpeg" },
                    { id: 13, name: "Dr. Gopal Raman Sharma", speciality: "Neurology", image: "./image/GOPAL.jpeg" }
                ],
                gynecology: [
                    { id: 14, name: "Dr. Kripa Shrrchan", speciality: "Gynecology", image: "./image/KRIPA.jpeg" },
                    { id: 15, name: "Dr. Rangina Laikambam", speciality: "Gynecology", image: "./image/RANGINA.jpeg" }
                ],
                orthopedics: [
                    { id: 16, name: "Dr. Rajeev Raj Manandhar", speciality: "Orthopedics", image: "./image/RAJEEV.jpeg" },
                    { id: 17, name: "Dr. Shishir Lakhey", speciality: "Orthopedics", image: "./image/SHISHIR.jpeg" }
                ],
                pediatrics: [
                    { id: 18, name: "Dr. Tekendra Karki", speciality: "Pediatrics", image: "./image/TEKENDRA.jpeg" },
                    { id: 19, name: "Dr. Vidhata Bhandari KC", speciality: "Pediatrics", image: "./image/VIDHATA.jpeg" }
                ]
            },
            medat: {
                cardiology: [
                    { id: 20, name: "Dr. Ranjit Kumar Sharma", speciality: "Cardiology", image: "./image/RANJIT.jpeg" },
                    { id: 21, name: "Dr. Prabesh Neupane", speciality: "Cardiology", image: "./image/PRABESH.jpeg" },
                    { id: 22, name: "Dr. Milan Gautam", speciality: "Cardiology", image: "./image/MILAN.jpeg" }
                ],
                neurology: [
                    { id: 23, name: "Dr. Naresh Kharbuja", speciality: "Neurology", image: "./image/NARESH_MEDAT.jpeg" }
                ],
                pediatrics: [
                    { id: 24, name: "Dr. Susil Bhandari", speciality: "Pediatrics", image: "./image/SUSIL.jpeg" }
                ],
                ent: [
                    { id: 25, name: "Dr. Toran KC", speciality: "ENT", image: "./image/TORAN.jpeg" },
                    { id: 26, name: "Dr. Sujan Singh Chhetri", speciality: "ENT", image: "./image/SUJAN.jpeg" }
                ]
            },
            bb: {
                cardiology: [
                    { id: 27, name: "Dr. Chandra Mani Adhikari", speciality: "Cardiology", image: "./image/CHANDRA_BB.jpeg" },
                    { id: 28, name: "Dr. Bhagwan Koirala", speciality: "Cardiology", image: "./image/BHAGWAN_BB.jpeg" },
                    { id: 29, name: "Dr. Prakash Raj Regmi", speciality: "Cardiology", image: "./image/PRRAJ_BB.jpeg" }
                ],
                gynecology: [
                    { id: 30, name: "Dr. Kundi Yangzom", speciality: "Gynecology", image: "./image/KUNDI.jpeg" }
                ],
                orthopedics: [
                    { id: 31, name: "Dr. Daman Kumar Jha", speciality: "Orthopedics", image: "./image/DAMAN.jpeg" },
                    { id: 32, name: "Dr. Amit Joshi", speciality: "Orthopedics", image: "./image/AMIT.jpeg" },
                    { id: 33, name: "Dr. Aayush Shrestha", speciality: "Orthopedics", image: "./image/AAYUSH .jpeg" }
                ],
                oncology: [
                    { id: 34, name: "Dr. Sachin Shakya", speciality: "Oncology", image: "./image/SACHIN.jpeg" },
                    { id: 35, name: "Dr. Rishikesh Narayan Shrestha", speciality: "Oncology", image: "./image/RISHIKESH.jpeg" }
                ],
                ent: [
                    { id: 36, name: "Dr. Deepak Yadav", speciality: "ENT", image: "./image/DEEPAK.jpeg" },
                    { id: 37, name: "Dr. Namita Shrestha", speciality: "ENT", image: "./image/NAMITA.jpeg" }
                ]
            },
            sumeru: {
                cardiology: [
                    { id: 38, name: "Dr. Chandra Mani Adhikari", speciality: "Cardiology", image: "./image/CHANDRA_SUMERU.jpeg" },
                    { id: 39, name: "Dr. Bhagwan Koirala", speciality: "Cardiology", image: "./image/BHAGWAN_SUMERU.jpeg" }
                ],
                orthopedics: [
                    { id: 40, name: "Dr. Rajeev Raj Manandhar", speciality: "Orthopedics", image: "./image/RAJEEV_SUMERU.jpeg" },
                    { id: 41, name: "Dr. Daman Kumar Jha", speciality: "Orthopedics", image: "./image/DAMAN_SUMERU.jpeg" }
                ],
                urology: [
                    { id: 42, name: "Dr. Bijay Mansingh Katwal", speciality: "Urology", image: "./image/BIJAY_UROLOGY.jpeg" },
                    { id: 43, name: "Dr. Mahesh Bahadur Adhikari", speciality: "Urology", image: "./image/MAHESH.jpeg" }
                ],
                ophthalmology: [
                    { id: 44, name: "Dr. Govinda Paudyal", speciality: "Ophthalmology", image: "./image/GOVINDA.jpeg" },
                    { id: 45, name: "Dr. Sanyam Bajimaya", speciality: "Ophthalmology", image: "./image/SANYAM.jpeg" }
                ]
            },
            nepalCancer: {
                
                oncology: [
                    { id: 46, name: "Dr. Roshan Pranapati", speciality: "Oncology", image: "./image/ROSHAN.jpeg" },
                    { id: 47, name: "Dr. Sudip Shrestha", speciality: "Oncology", image: "./image/SUDIP.jpeg" }
                ],
                hematology: [
                    { id: 48, name: "Dr. Samir Shrestha", speciality: "Hematology", image: "./image/SAMIR.jpeg" }
                ]
            },
            norvic: {
                cardiology: [
                    { id: 49, name: "Dr. Ranjit Kumar Sharma", speciality: "Cardiology", image: "./image/RANJIT_NORVIC.jpeg" },
                    { id: 50, name: "Dr. Prabesh Neupane", speciality: "Cardiology", image: "./image/PRABESH_NORVIC.jpeg" }
                ],
                pediatrics: [
                    { id: 51, name: "Dr. Tekendra Karki", speciality: "Pediatrics", image: "./image/TEKENDRA_NORVIC.jpeg" },
                    { id: 52, name: "Dr. Vidhata Bhandari KC", speciality: "Pediatrics", image: "./image/VIDHATA_NORVIC.jpeg" }
                ],
                ent: [
                    { id: 53, name: "Dr. Toran KC", speciality: "ENT", image: "./image/TORAN_NORVIC.jpeg" },
                    { id: 54, name: "Dr. Sujan Singh Chhetri", speciality: "ENT", image: "./image/SUJAN_NORVIC.jpeg" }
                ],
                urology: [
                    { id: 55, name: "Dr. Jit Prakash Shrestha", speciality: "Urology", image: "./image/JIT.jpeg" },
                    { id: 56, name: "Dr. Prashant Mishra", speciality: "Urology", image: "./image/PRASHANT.jpeg" }
                ],
                ophthalmology: [
                    { id: 57, name: "Dr. Sangeeta Shrestha", speciality: "Ophthalmology", image: "./image/S ANGEETA.jpeg" },
                    { id: 58, name: "Dr. Jeevan Kumar Shrestha", speciality: "Ophthalmology", image: "./image/JEEVAN.jpeg" }
                ]
            },
            nepalMediciti: {
                cardiology: [
                    { id: 59, name: "Dr. Milan Gautam", speciality: "Cardiology", image: "./image/MILAN_MEDICITI.jpeg" }
                ],
                gynecology: [
                    { id: 60, name: "Dr. Mala Shrestha", speciality: "Gynecology", image: "./image/MALA_MEDICITI.jpeg" }
                ],
                oncology: [
                    { id: 61, name: "Dr. Sachin Shakya", speciality: "Oncology", image: "./image/SACHIN_MEDICITI.jpeg" }
                ],
                ent: [
                    { id: 62, name: "Dr. Deepak Yadav", speciality: "ENT", image: "./image/DEEPAK_MEDICITI.jpeg" }
                ],
                ophthalmology: [
                    { id: 63, name: "Dr. Govinda Paudyal", speciality: "Ophthalmology", image: "./image/GOVINDA_MEDICITI.jpeg" }
                ]
            }
        };

        const timeSlots = {
            patan: {
                cardiology: ["09:00 AM", "09:30 AM", "10:00 AM", "10:30 AM"],
                neurology: ["11:00 AM", "11:30 AM"],
                gynecology: ["02:00 PM", "02:30 PM"],
                pediatrics: ["03:00 PM", "03:30 PM"]
            },
            alka: {
                cardiology: ["09:00 AM", "09:30 AM"],
                neurology: ["10:00 AM", "10:30 AM"],
                gynecology: ["11:00 AM", "11:30 AM"],
                orthopedics: ["02:00 PM", "02:30 PM"],
                pediatrics: ["03:00 PM", "03:30 PM"]
            },
            medat: {
                cardiology: ["09:00 AM", "09:30 AM", "10:00 AM"],
                neurology: ["11:00 AM"],
                pediatrics: ["02:00 PM"],
                ent: ["03:00 PM", "03:30 PM"]
            },
            bb: {
                cardiology: ["09:00 AM", "09:30 AM", "10:00 AM"],
                gynecology: ["11:00 AM"],
                orthopedics: ["02:00 PM", "02:30 PM"],
                oncology: ["03:00 PM", "03:30 PM"],
                ent: ["04:00 PM"]
            },
            sumeru: {
                cardiology: ["09:00 AM", "09:30 AM"],
                orthopedics: ["10:00 AM", "10:30 AM"],
                urology: ["11:00 AM", "11:30 AM"],
                ophthalmology: ["02:00 PM", "02:30 PM"]
            },
            nepalCancer: {
                oncology: ["09:00 AM", "09:30 AM"],
                hematology: ["10:00 AM"]
            },
            norvic: {
                cardiology: ["09:00 AM", "09:30 AM"],
                pediatrics: ["10:00 AM", "10:30 AM"],
                ent: ["11:00 AM", "11:30 AM"],
                urology: ["02:00 PM", "02:30 PM"],
                ophthalmology: ["03:00 PM", "03:30 PM"]
            },
            nepalMediciti: {
                cardiology: ["09:00 AM"],
                gynecology: ["10:00 AM"],
                oncology: ["11:00 AM"],
                ent: ["02:00 PM"],
                ophthalmology: ["03:00 PM"]
            }
        };

        function loadDepartments() {
            const hospital = document.getElementById('hospital').value;
            const departmentSection = document.getElementById('departmentSection');
            const doctorsSection = document.getElementById('doctorsSection');
            const dateSection = document.getElementById('dateSection');
            const timeSection = document.getElementById('timeSection');
            const bookButton = document.getElementById('bookButton');

            if (!hospital) {
                departmentSection.classList.add('hidden');
                doctorsSection.classList.add('hidden');
                dateSection.classList.add('hidden');
                timeSection.classList.add('hidden');
                bookButton.classList.add('hidden');
                return;
            }

            departmentSection.classList.remove('hidden');
            document.getElementById('department').value = ''; // Reset department selection
            doctorsSection.classList.add('hidden');
            dateSection.classList.add('hidden');
            timeSection.classList.add('hidden');
            bookButton.classList.add('hidden');
        }

        function loadDoctors() {
            const hospital = document.getElementById('hospital').value;
            const department = document.getElementById('department').value;
            const doctorsSection = document.getElementById('doctorsSection');
            const doctorsContainer = document.getElementById('doctorsContainer');
            const dateSection = document.getElementById('dateSection');
            const timeSection = document.getElementById('timeSection');
            const bookButton = document.getElementById('bookButton');

            if (!department) {
                doctorsSection.classList.add('hidden');
                dateSection.classList.add('hidden');
                timeSection.classList.add('hidden');
                bookButton.classList.add('hidden');
                return;
            }

            doctorsContainer.innerHTML = ''; // Clear previous doctors
            doctorsSection.classList.remove('hidden');
            dateSection.classList.add('hidden');
            timeSection.classList.add('hidden');
            bookButton.classList.add('hidden');

            const doctors = doctorsData[hospital][department];
            doctors.forEach(doctor => {
                const doctorCard = document.createElement('div');
                doctorCard.className = 'doctor-card';
                doctorCard.onclick = () => selectDoctor(doctorCard);
                doctorCard.innerHTML = `
                    <img src="${doctor.image}" alt="${doctor.name}">
                    <h3>${doctor.name}</h3>
                    <p>${doctor.speciality}</p>
                `;
                doctorsContainer.appendChild(doctorCard);
            });
        }

        function selectDoctor(selectedCard) {
            const doctorCards = document.querySelectorAll('.doctor-card');
            doctorCards.forEach(card => card.classList.remove('selected'));
            selectedCard.classList.add('selected');

            const dateSection = document.getElementById('dateSection');
            dateSection.classList.remove('hidden');

            const dateInput = document.getElementById('appointmentDate');
            const today = new Date();
            const maxDate = new Date();
            maxDate.setMonth(maxDate.getMonth() + 3);

            dateInput.min = today.toISOString().split('T')[0];
            dateInput.max = maxDate.toISOString().split('T')[0];
        }

        function loadTimeSlots() {
            const hospital = document.getElementById('hospital').value;
            const department = document.getElementById('department').value;
            const timeSection = document.getElementById('timeSection');
            const timeSlotsContainer = document.getElementById('timeSlotsContainer');
            const bookButton = document.getElementById('bookButton');

            timeSection.classList.remove('hidden');
            bookButton.classList.remove('hidden');
            timeSlotsContainer.innerHTML = '';

            const slots = timeSlots[hospital][department];
            slots.forEach(time => {
                const slot = document.createElement('div');
                slot.className = 'time-slot';
                slot.onclick = () => selectTimeSlot(slot);
                slot.textContent = time;
                timeSlotsContainer.appendChild(slot);
            });
        }

        function selectTimeSlot(selectedSlot) {
            const timeSlots = document.querySelectorAll('.time-slot');
            timeSlots.forEach(slot => slot.classList.remove('selected'));
            selectedSlot.classList.add('selected');
        }

        function bookAppointment() {
            const patientName = document.getElementById('patientName').value;
            const patientAge = document.getElementById('patientAge').value;
            const contactNumber = document.getElementById('contactNumber').value;
            const hospital = document.getElementById('hospital').value;
            const department = document.getElementById('department').value;
            const selectedDoctor = document.querySelector('.doctor-card.selected h3').textContent;
            const appointmentDate = document.getElementById('appointmentDate').value;
            const selectedTime = document.querySelector('.time-slot.selected')?.textContent;

            if (patientName && patientAge && contactNumber && hospital && department && selectedDoctor && appointmentDate && selectedTime) {

                var formData = new FormData();
             // Add data to the FormData object
    formData.append('patientName', patientName);
    formData.append('patientAge', patientAge);
    formData.append('contactNumber', contactNumber);
    formData.append('hospital', hospital);
    formData.append('department', department);
    formData.append('doctorName', selectedDoctor);
    formData.append('appointmentDate', appointmentDate);
    formData.append('appointmentTime', selectedTime);
    formData.append('appointmentStatus', 'Pending');

    // Use Fetch API to send the FormData
    fetch('/FinalProject/BookAppointment.php', { // Replace with your actual endpoint URL
        method: 'POST',
        body: formData
    })
    // .then(response => response.json())
    .then(data => {
        alert('Appointment successfully scheduled:', data);
       // location.reload();
        // You can update the UI or display a success message here
    })
    .catch(error => {
        console.error('Error scheduling appointment:', error);
        // Handle error and inform the user
    });


                // alert(`Appointment booked successfully!\n\nPatient Name: ${patientName}\nAge: ${patientAge}\nContact Number: ${contactNumber}\nHospital: ${hospital}\nDepartment: ${department}\nDoctor: ${selectedDoctor}\nDate: ${appointmentDate}\nTime: ${selectedTime}`);
            } else {
                alert('Please fill in all required fields');
            }
        }
    </script>
    </body>
</html>